<div class="page-section active">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="margin:0;"><i class="fas fa-th-large"></i> 儀表板項目管理</h2>
        <button class="btn btn-primary" onclick="dashboardItemManager.openModal()">
            <i class="fas fa-plus"></i> 新增項目
        </button>
    </div>

    <div class="card" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
        <table class="table">
            <thead>
                <tr>
                    <th style="width: 60px;">排序</th>
                    <th>名稱</th>
                    <th>數據源 (DataSource)</th>
                    <th>授權角色</th>
                    <th style="width: 80px;">狀態</th>
                    <th style="width: 150px;">操作</th>
                </tr>
            </thead>
            <tbody id="dashboardItemTableBody">
                <tr>
                    <td colspan="6" style="text-align:center; padding:20px;">載入中...</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 編輯彈窗 -->
<div id="dashboardItemModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <h3 id="modalTitle">新增儀表板項目</h3>
        <input type="hidden" id="itemId">
        
        <div class="form-group">
            <label>項目名稱 (Label)</label>
            <input type="text" id="inputLabel" class="form-control" placeholder="例如：人員總數">
        </div>
        
        <div style="display: flex; gap: 15px;">
            <div class="form-group" style="flex: 1;">
                <label>圖示 (FontAwesome)</label>
                <input type="text" id="inputIcon" class="form-control" placeholder="fas fa-users">
            </div>
            <div class="form-group" style="flex: 1;">
                <label>卡片顏色</label>
                <input type="color" id="inputColor" class="form-control" style="height: 38px; padding: 2px;">
            </div>
        </div>

        <div class="form-group">
            <label>跳轉路徑 (Path)</label>
            <input type="text" id="inputPath" class="form-control" placeholder="/admin/staff">
        </div>

        <div class="form-group">
            <label>數據源 (DataSource)</label>
            <select id="inputDataSource" class="form-control"></select>
            <div id="dataSourceDesc" style="font-size: 0.85rem; color: #999; margin-top: 5px; padding: 8px; background: #f8f9fa; border-radius: 4px;">
                請選擇數據源以查看說明
            </div>
        </div>

        <div class="form-group">
            <label>授權角色 (勾選授權對象)</label>
            <div id="roleCheckboxContainer" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; background: #fff;">
                <!-- 動態插入角色勾選 -->
            </div>
        </div>

        <div style="display: flex; gap: 15px;">
            <div class="form-group" style="flex: 1;">
                <label>顯示排序</label>
                <input type="number" id="inputOrder" class="form-control" placeholder="10">
            </div>
            <div class="form-group" style="flex: 1; display: flex; align-items: flex-end; padding-bottom: 10px;">
                <label style="cursor:pointer; display: flex; align-items: center;">
                    <input type="checkbox" id="inputIsActive" checked style="margin-right: 8px;"> 啟用此項目
                </label>
            </div>
        </div>

        <div class="modal-footer" style="margin-top: 20px; text-align: right;">
            <button class="btn btn-secondary" onclick="dashboardItemManager.closeModal()">取消</button>
            <button class="btn btn-primary" onclick="dashboardItemManager.saveItem()">儲   存</button>
        </div>
    </div>
</div>

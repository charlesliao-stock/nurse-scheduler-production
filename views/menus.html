<div class="page-section active">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2 style="margin:0;"><i class="fas fa-bars"></i> 選單管理</h2>
    </div>
    
    <div class="toolbar">
        <div style="margin-left:auto;">
            <button class="btn btn-add" onclick="menuManager.openModal()">
                <i class="fas fa-plus"></i> 新增選單
            </button>
        </div>
    </div>

    <div class="table-container">
        <table id="menuTable">
            <thead>
                <tr>
                    <th style="width: 10%; cursor:pointer;" onclick="menuManager.sortData('order')">
                        排序 <i id="sort_icon_menu_order" class="fas fa-sort"></i>
                    </th>
                    <th style="width: 10%;">圖示</th>
                    <th style="width: 20%; cursor:pointer;" onclick="menuManager.sortData('label')">
                        名稱 <i id="sort_icon_menu_label" class="fas fa-sort"></i>
                    </th>
                    <th style="width: 25%;">路徑</th>
                    <th style="width: 15%;">權限需求</th>
                    <th style="width: 10%; cursor:pointer;" onclick="menuManager.sortData('isActive')">
                        狀態 <i id="sort_icon_menu_isActive" class="fas fa-sort"></i>
                    </th>
                    <th style="width: 10%;">操作</th>
                </tr>
            </thead>
            <tbody id="menuTableBody"></tbody>
        </table>
    </div>
</div>

<div id="menuModal" class="modal">
    <div class="modal-content" style="max-width: 500px;">
        <h3>編輯選單</h3>
        <input type="hidden" id="menuDocId">
        <input type="hidden" id="currentMode">

        <div class="form-row">
            <div class="form-group">
                <label>名稱 (Label) *</label>
                <input type="text" id="inputMenuLabel" placeholder="例如: 人員管理">
            </div>
            <div class="form-group">
                <label>排序 (Order) *</label>
                <input type="number" id="inputMenuOrder" placeholder="數字越小越前面">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>路徑 (Path) *</label>
                <input type="text" id="inputMenuPath" placeholder="例如: /admin/staff">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>圖示代碼 (FontAwesome)</label>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="inputMenuIcon" placeholder="例如: fas fa-user" oninput="menuManager.previewIcon()">
                    <div id="iconPreview" style="width:40px; display:flex; align-items:center; justify-content:center; background:#eee; border-radius:4px;">
                        <i class="fas fa-question"></i>
                    </div>
                </div>
                <small style="color:#666;">參考：<a href="https://fontawesome.com/icons" target="_blank">FontAwesome 圖示庫</a></small>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>權限需求 (選填)</label>
                <input type="text" id="inputMenuPerm" placeholder="例如: system_admin">
                <small style="color:#666;">留空則所有人可見</small>
            </div>
            <div class="form-group">
                <label>啟用狀態</label>
                <div style="margin-top:10px;">
                    <label style="display:inline-flex; align-items:center; cursor:pointer;">
                        <input type="checkbox" id="checkMenuActive" checked style="width:auto; margin-right:8px;"> 啟用
                    </label>
                </div>
            </div>
        </div>

        <div style="text-align:right; margin-top:25px;">
            <button class="btn btn-close" onclick="menuManager.closeModal()">取消</button>
            <button class="btn btn-add" onclick="menuManager.saveData()">儲存</button>
        </div>
    </div>
</div>

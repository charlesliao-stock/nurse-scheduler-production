<div class="page-section active">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2 style="margin:0; color: #2c3e50;"><i class="fas fa-star"></i> 班表評分與標準配置</h2>
    </div>
    
    <div class="toolbar">
        <label style="margin-right:10px; font-weight:bold; color:#555;">設定單位:</label>
        <select id="scoreUnitSelect" class="form-control" style="width: 250px; display:inline-block;">
            <option value="">載入中...</option>
        </select>
        <button class="btn btn-add" onclick="scoreSettingsManager.saveData()" style="margin-left:auto;">
            <i class="fas fa-save"></i> 儲存評分設定
        </button>
    </div>

    <div id="scoreSettingsContainer" class="scoring-container" style="display:none;">
        <div class="alert-info">
            <i class="fas fa-info-circle"></i> 設定後請點擊「儲存評分設定」。總權重建議為 100%。
        </div>

        <div class="weight-total-card">
            <span style="font-size:0.9rem; color:#666;">總權重加總:</span>
            <span id="totalWeight" style="font-size:1.8rem; font-weight:bold; color:#2ecc71; margin-left:10px;">0%</span>
        </div>

        <div class="score-cards-grid">
            <div class="score-card">
                <div class="card-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                    <span class="card-title">1. 公平性指標</span>
                    <span class="card-weight" id="fairness_weight_display">0%</span>
                </div>
                <div class="card-body" id="metrics_fairness"></div>
            </div>

            <div class="score-card">
                <div class="card-header" style="background: linear-gradient(135deg, #38ef7d, #11998e);">
                    <span class="card-title">2. 滿意度指標</span>
                    <span class="card-weight" id="satisfaction_weight_display">0%</span>
                </div>
                <div class="card-body" id="metrics_satisfaction"></div>
            </div>

            <div class="score-card">
                <div class="card-header" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                    <span class="card-title">3. 疲勞度指標</span>
                    <span class="card-weight" id="fatigue_weight_display">0%</span>
                </div>
                <div class="card-body" id="metrics_fatigue"></div>
            </div>

            <div class="score-card">
                <div class="card-header" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                    <span class="card-title">4. 排班效率</span>
                    <span class="card-weight" id="efficiency_weight_display">0%</span>
                </div>
                <div class="card-body" id="metrics_efficiency"></div>
            </div>

            <div class="score-card">
                <div class="card-header" style="background: linear-gradient(135deg, #f6d365, #fda085);">
                    <span class="card-title">5. 成本控制</span>
                    <span class="card-weight" id="cost_weight_display">0%</span>
                </div>
                <div class="card-body" id="metrics_cost"></div>
            </div>
        </div>
    </div>
</div>

<div id="gradingModal" class="modal">
    <div class="modal-content" style="max-width: 650px;">
        <h3><i class="fas fa-edit"></i> 評分標準配置</h3>
        <p id="gradingTargetName" style="color:#667eea; font-weight:bold; font-size:1.1rem; margin-bottom:5px;"></p>
        <p id="gradingTargetDesc" style="color:#666; font-size:0.85rem; margin-bottom:20px;"></p>
        
        <table class="table" style="width:100%; border-collapse:collapse;">
            <thead style="background:#f8f9fa;">
                <tr>
                    <th style="padding:10px;">下限 (>=)</th>
                    <th style="padding:10px;">得分 (1-5)</th>
                    <th style="padding:10px;">標籤</th>
                    <th style="padding:10px;">操作</th>
                </tr>
            </thead>
            <tbody id="gradingTableBody"></tbody>
        </table>
        <button class="btn btn-add" style="width:100%; margin-top:10px;" onclick="scoreSettingsManager.addTierRow()">
            <i class="fas fa-plus"></i> 新增評分區間
        </button>
        <div style="text-align:right; margin-top:20px; border-top:1px solid #eee; padding-top:15px;">
            <button class="btn btn-close" onclick="scoreSettingsManager.closeGradingModal()">取消</button>
            <button class="btn btn-primary" onclick="scoreSettingsManager.saveTiers()">確認暫存</button>
        </div>
    </div>
</div>

<style>
    .tip-icon { color: #a0aec0; font-size: 0.85rem; margin-left: 5px; cursor: help; }
    .btn-standard { background: #fff; border: 1px solid #ddd; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; cursor: pointer; }
    .btn-standard:hover { border-color: #667eea; color: #667eea; }
</style>
